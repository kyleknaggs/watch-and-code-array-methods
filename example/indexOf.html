<script src="../simpletest.js"></script>
<script>
  // Summary:
  // Returns the first index at which a given element can be found in the array, or -1 if it is not present.

  // Prototype implementation:
  // function indexOf(array, searchElement, fromIndex){
  //   var startingIndex = 0;

  //   if(fromIndex){
  //     startingIndex = fromIndex;
  //   }

  //   for (var i = startingIndex; i < array.length; i++) {
  //     if (searchElement === array[i]){
  //       return i;
  //     }
  //   }

  //   return -1;
  // }

  // Function signature:
  // indexOf(array, searchElement[, fromIndex])

  // searchElement: Element to locate in the array
  // fromIndex: Index to begin searching for the element at

  // Return value:
  // The first index of the element in the array; -1 if not found.

  // Function Syntax:

  function indexOf(array, searchElement, fromIndex) {
    // Set default startingIndex to 0
    var startingIndex = 0;

    // If passed a fromIndex value.
    if (fromIndex) {
      if (fromIndex < 0) {
        startingIndex = array.length + fromIndex;
      }
      if (fromIndex >= 0) {
        startingIndex = fromIndex;
      }
    }

    for (var i = startingIndex; i < array.length; i++) {
      if (searchElement === array[i]) {
        return i;
      }
    }
    return -1;
  }

  tests({
    "1a) If searchElement exists, it should return index at which searchElement occurs.": function() {
      var indexOfElement = indexOf([0, 1, 2], 1);
      eq(indexOfElement, 1);
    },
    "1b) If > 1 searchElements exist, it should return ONLY the index of the first instance in array.": function() {
      var indexOfElement = indexOf([0, 1, 1, 1, 2], 1);
      eq(indexOfElement, 1);
    },
    "1c) If should use strict equality to compare searchElement to elements in array.": function() {
      var indexOfElement = indexOf([0, "1", 1], 1);
      eq(indexOfElement, 2);
    },

    "2a) If searchElement does not exist, it should return -1.": function() {
      var indexOfElement = indexOf([0, 1], 2);
      eq(indexOfElement, -1);
    },

    "3a) If fromIndex === 0, start search at index 0.": function() {
      var indexOfElement = indexOf([0, 1], 0, 0);
      eq(indexOfElement, 0);
    },
    "3b) If no fromIndex is provided, start search at index 0.": function() {
      var indexOfElement = indexOf([0, 1], 0);
      eq(indexOfElement, 0);
    },

    "4a) If fromIndex >= array.length, return -1.": function() {
      var indexOfElement = indexOf([1], 1, 1);
      eq(indexOfElement, -1);
    },

    "5a) If fromIndex < 0, begin search at array[array.length+fromIndex].": function() {
      var indexOfFirstNegativeElement = indexOf([0, 1, 2], 1, -2);
      var indexOfSecondNegativeElement = indexOf([0, 1, 2], 1, -1);
      eq(indexOfFirstNegativeElement, 1);
      eq(indexOfSecondNegativeElement, -1);
    },

    "6a) If no searchElement, return -1.": function() {
      var indexOfElement = indexOf([0]);
      eq(indexOfElement, -1);
    }

    /*
    // Do not know how to test this yet.
    "7a) If fromIndex is negative, still search array from front to back.": function() {
    }
    */
  });
</script>
