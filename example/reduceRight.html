<script src="../simpletest.js"></script>
<script>
  // Note: reduceRight() docs seem appear to be a sloppy version of the reduce() docs

  // Summary:
  // Applies a function against an accumulator and each value of the array (from right to left) to reduce it to a single value
  // Note: Same as array.reduce() from right to left instead of left to right.

  // Prototype implementation:
  // function reduceRight(array, callback, initialValue) {
  //   var resultSoFar = initialValue;
  //   for (var i = array.length - 1; i >= 0; i--) {
  //     resultSoFar = callback(resultSoFar, array[i]);
  //   }
  //   return resultSoFar;
  // }

  // Function signature:
  // reduceRight(array, callback[, initialValue])

  // Callback Parameters:
  // accumulator
  // currentValue
  // [index]
  // [array]

  // Return value:
  // The value that results from the reduction.

  // Description:

  // Function Syntax:

  function reduceRight(array, callback, initialValue) {
    var accumulator = initialValue;
    var startingIndex = array.length - 1;

    if (arguments.length < 3) {
      startingIndex--;
    }

    for (var i = startingIndex; i >= 0; i--) {
      callback(accumulator, array[i]);
    }
  }

  tests({
    "1a) If initialValue it should call callback array.length times.": function() {
      var numberOfTimeCallbackHasRun = 0;
      reduceRight(
        [1, 2, 3],
        function(accumulator) {
          numberOfTimeCallbackHasRun++;
        },
        0
      );
      eq(numberOfTimeCallbackHasRun, 3);
    },
    "1b) If no initialValue it should call callback array.length - 1 times.": function() {
      var numberOfTimeCallbackHasRun = 0;
      // debugger;
      reduceRight([1, 2, 3], function(accumulator) {
        numberOfTimeCallbackHasRun++;
      });
      eq(numberOfTimeCallbackHasRun, 2);
    },

    "2a) If initialValue accumulator will start with initialValue.": function() {
      reduceRight(
        [1],
        function(accumulator) {
          eq(accumulator, 0);
        },
        0
      );
    },

    "2b) Callback should accept the ith element of the array.": function() {
      reduceRight(
        [1],
        function(accumulator, currentValue) {
          eq(currentValue, 1);
        },
        0
      );
    },
    "3a) If initialValue currentValue will start with last value in array.": function() {
      var isLastElementFirst = false;
      var numberOfTimeCallbackHasRun = 0;
      reduceRight(
        [1, 2],
        function(accumulator, currentValue) {
          numberOfTimeCallbackHasRun++;
          if (currentValue === 2 && numberOfTimeCallbackHasRun === 1) {
            isLastElementFirst = true;
          }
        },
        0
      );
      eq(isLastElementFirst, true);
    },

    "4a) If initialValue and the array is empty It should not call callback.": function() {
      fail();
    },
    "4b) If initialValue and the array is empty initialValue should be returned": function() {
      fail();
    },

    // Case D: :
    "5a) If no initialValue accumulator will start with last element in the array.": function() {
      fail();
    },
    "5b) If no initialValue currentValue will start with second to last element in the array.": function() {
      fail();
    },
    "5c) If no initialValue and array has one element it should not call callback.": function() {
      fail();
    },
    "5d) If no initialValue and array has one element the only element should be returned.": function() {
      fail();
    },
    "5e) If no initialValue and array is empty throw TypeError.": function() {
      fail();
    },

    "6a) It should return a single value.": function() {
      fail();
    },
    "6b) It should reduce.": function() {
      fail();
    },

    "8a) Callback should accept index.": function() {
      fail();
    },
    "8b) Callback should accept array.": function() {
      fail();
    },

    "9a) It should exclude holes.": function() {
      // will implement later
      fail();
      /*
      var numberOfTimeCallbackHasRun = 0;
      reduceRight([, , ,], function() {
        numberOfTimeCallbackHasRun++;
      });
      eq(numberOfTimeCallbackHasRun, 0);
      */
    }
  });
</script>
